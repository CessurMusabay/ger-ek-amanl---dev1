 public class BoundedBuffer { private static int buffer[]; private static int first; private static int last; private static int numberInBuffer = 0; private static int size; public BoundedBuffer(int length) { size = length; buffer = new int[size]; last = 0; first = 0; } public synchronized void put(int item) throws InterruptedException { while (numberInBuffer == size) { wait(); }; last = (last + 1) % size; numberInBuffer++; buffer[last] = item; notifyAll(); } public synchronized int get() throws InterruptedException { while (numberInBuffer == 0) { wait(); }; first = (first + 1) % size; numberInBuffer--; notifyAll(); return buffer[first]; } public static void main(String[] args) { BoundedBuffer b=new BoundedBuffer(3); BoundedBuffer a=new BoundedBuffer(3); try{ b.put(5); a.put(6); b.put(7); a.put(11); System.out.println(b.get()); b.put(8); System.out.println(a.get()); System.out.println(b.get()); System.out.println(a.get()); b.put(9); a.put(10); System.out.println(b.get()); System.out.println(a.get()); System.out.println(b.get()); }catch(Exception e){ System.out.println(e); } } }
